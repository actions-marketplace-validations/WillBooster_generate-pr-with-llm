import e from"node:fs";import r from"node:os";import t from"node:path";import o from"@actions/core";import{l as i,D as n,a,m as d,n as s,b as u}from"./main-DA3u-sLa.js";import"yaml";import"ansis";import"dotenv";import"node:child_process";import"@octokit/graphql";import"@octokit/rest";import"@ai-sdk/amazon-bedrock";import"@ai-sdk/anthropic";import"@ai-sdk/azure";import"@ai-sdk/google";import"@ai-sdk/google-vertex";import"@ai-sdk/openai";import"@ai-sdk/xai";import"@openrouter/ai-sdk-provider";import"ai";import"ai-v4";import"ollama-ai-provider-v2";const m=i(),g=o.getInput("issue-number",{required:!0}),p=o.getInput("planning-model",{required:!1})||m["planning-model"],l="false"!==(o.getInput("two-staged-planning",{required:!1})||m["two-staged-planning"]),c=o.getInput("reasoning-effort",{required:!1})||m["reasoning-effort"],x="true"===(o.getInput("dry-run",{required:!1})||m["dry-run"]),f=o.getInput("coding-tool",{required:!1})||m["coding-tool"]||n,I=o.getInput("aider-extra-args",{required:!1})||m["aider-extra-args"],v=o.getInput("claude-code-extra-args",{required:!1})||m["claude-code-extra-args"],q=o.getInput("codex-extra-args",{required:!1})||m["codex-extra-args"],h=o.getInput("gemini-extra-args",{required:!1})||m["gemini-extra-args"],b=o.getInput("repomix-extra-args",{required:!1})||m["repomix-extra-args"],k=o.getInput("test-command",{required:!1})||m["test-command"],A=o.getInput("max-test-attempts",{required:!1})||m["max-test-attempts"],E=A?Number.parseInt(String(A),10):u,w=o.getInput("remove-pattern",{required:!1})||m["remove-pattern"],y="true"===(o.getInput("no-branch",{required:!1})||m["no-branch"]),N=o.getInput("node-runtime",{required:!1})||m["node-runtime"]||a;c&&!["low","medium","high"].includes(c)&&(console.error(`Invalid reasoning-effort value: ${c}. Using default. Valid values are: low, medium, high`),process.exit(1)),["aider","claude-code","codex-cli","gemini-cli"].includes(f)||(console.error(`Invalid coding-tool value: ${f}. Using default. Valid values are: aider, claude-code, codex-cli, gemini-cli`),process.exit(1)),N&&!["node","bun","npx","bunx"].includes(N)&&(console.error(`Invalid node-runtime value: ${N}. Using default. Valid values are: node (npx) and bun (bunx)`),process.exit(1));const S=s(N);e.rmSync(t.join(r.homedir(),".config","gh"),{force:!0,recursive:!0}),d({aiderExtraArgs:I,claudeCodeExtraArgs:v,codexExtraArgs:q,geminiExtraArgs:h,codingTool:f,twoStagePlanning:l,dryRun:x,noBranch:y,nodeRuntime:S,issueNumber:Number(g),maxTestAttempts:E,planningModel:p,reasoningEffort:c,repomixExtraArgs:b,testCommand:k,removePattern:w});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWN0aW9uLmpzIiwic291cmNlcyI6WyIuLi9zcmMvYWN0aW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBmcyBmcm9tICdub2RlOmZzJztcbmltcG9ydCBvcyBmcm9tICdub2RlOm9zJztcbmltcG9ydCBwYXRoIGZyb20gJ25vZGU6cGF0aCc7XG5pbXBvcnQgY29yZSBmcm9tICdAYWN0aW9ucy9jb3JlJztcbmltcG9ydCB7IGxvYWRDb25maWdGaWxlIH0gZnJvbSAnLi9jb25maWcuanMnO1xuaW1wb3J0IHsgREVGQVVMVF9DT0RJTkdfVE9PTCwgREVGQVVMVF9NQVhfVEVTVF9BVFRFTVBUUywgREVGQVVMVF9OT0RFX1JVTlRJTUUgfSBmcm9tICcuL2RlZmF1bHRPcHRpb25zLmpzJztcbmltcG9ydCB7IG1haW4gfSBmcm9tICcuL21haW4uanMnO1xuaW1wb3J0IHsgbm9ybWFsaXplTm9kZVJ1bnRpbWUgfSBmcm9tICcuL3NwYXduLmpzJztcbmltcG9ydCB0eXBlIHsgQ29kaW5nVG9vbCwgTm9kZVJ1bnRpbWUsIE5vZGVSdW50aW1lQWN0dWFsLCBSZWFzb25pbmdFZmZvcnQgfSBmcm9tICcuL3R5cGVzLmpzJztcblxuY29uc3QgY29uZmlnT3B0aW9ucyA9IGxvYWRDb25maWdGaWxlKCk7XG5cbi8vIEdldCBpbnB1dHMgKEdpdEh1YiBBY3Rpb24gaW5wdXRzIG92ZXJyaWRlIGNvbmZpZyBmaWxlIHZhbHVlcylcbmNvbnN0IGlzc3VlTnVtYmVyID0gY29yZS5nZXRJbnB1dCgnaXNzdWUtbnVtYmVyJywgeyByZXF1aXJlZDogdHJ1ZSB9KTtcbmNvbnN0IHBsYW5uaW5nTW9kZWwgPVxuICBjb3JlLmdldElucHV0KCdwbGFubmluZy1tb2RlbCcsIHsgcmVxdWlyZWQ6IGZhbHNlIH0pIHx8IChjb25maWdPcHRpb25zWydwbGFubmluZy1tb2RlbCddIGFzIHN0cmluZyk7XG5jb25zdCB0d29TdGFnZVBsYW5uaW5nSW5wdXQgPVxuICBjb3JlLmdldElucHV0KCd0d28tc3RhZ2VkLXBsYW5uaW5nJywgeyByZXF1aXJlZDogZmFsc2UgfSkgfHwgKGNvbmZpZ09wdGlvbnNbJ3R3by1zdGFnZWQtcGxhbm5pbmcnXSBhcyBzdHJpbmcpO1xuY29uc3QgdHdvU3RhZ2VQbGFubmluZyA9IHR3b1N0YWdlUGxhbm5pbmdJbnB1dCAhPT0gJ2ZhbHNlJztcbmNvbnN0IHJlYXNvbmluZ0VmZm9ydCA9IChjb3JlLmdldElucHV0KCdyZWFzb25pbmctZWZmb3J0JywgeyByZXF1aXJlZDogZmFsc2UgfSkgfHxcbiAgKGNvbmZpZ09wdGlvbnNbJ3JlYXNvbmluZy1lZmZvcnQnXSBhcyBzdHJpbmcpKSBhcyBSZWFzb25pbmdFZmZvcnQgfCB1bmRlZmluZWQ7XG5jb25zdCBkcnlSdW5JbnB1dCA9IGNvcmUuZ2V0SW5wdXQoJ2RyeS1ydW4nLCB7IHJlcXVpcmVkOiBmYWxzZSB9KSB8fCAoY29uZmlnT3B0aW9uc1snZHJ5LXJ1biddIGFzIHN0cmluZyk7XG5jb25zdCBkcnlSdW4gPSBkcnlSdW5JbnB1dCA9PT0gJ3RydWUnO1xuY29uc3QgY29kaW5nVG9vbCA9IChjb3JlLmdldElucHV0KCdjb2RpbmctdG9vbCcsIHsgcmVxdWlyZWQ6IGZhbHNlIH0pIHx8XG4gIChjb25maWdPcHRpb25zWydjb2RpbmctdG9vbCddIGFzIHN0cmluZykgfHxcbiAgREVGQVVMVF9DT0RJTkdfVE9PTCkgYXMgQ29kaW5nVG9vbDtcbmNvbnN0IGFpZGVyRXh0cmFBcmdzID1cbiAgY29yZS5nZXRJbnB1dCgnYWlkZXItZXh0cmEtYXJncycsIHsgcmVxdWlyZWQ6IGZhbHNlIH0pIHx8IChjb25maWdPcHRpb25zWydhaWRlci1leHRyYS1hcmdzJ10gYXMgc3RyaW5nKTtcbmNvbnN0IGNsYXVkZUNvZGVFeHRyYUFyZ3MgPVxuICBjb3JlLmdldElucHV0KCdjbGF1ZGUtY29kZS1leHRyYS1hcmdzJywgeyByZXF1aXJlZDogZmFsc2UgfSkgfHwgKGNvbmZpZ09wdGlvbnNbJ2NsYXVkZS1jb2RlLWV4dHJhLWFyZ3MnXSBhcyBzdHJpbmcpO1xuY29uc3QgY29kZXhFeHRyYUFyZ3MgPVxuICBjb3JlLmdldElucHV0KCdjb2RleC1leHRyYS1hcmdzJywgeyByZXF1aXJlZDogZmFsc2UgfSkgfHwgKGNvbmZpZ09wdGlvbnNbJ2NvZGV4LWV4dHJhLWFyZ3MnXSBhcyBzdHJpbmcpO1xuY29uc3QgZ2VtaW5pRXh0cmFBcmdzID1cbiAgY29yZS5nZXRJbnB1dCgnZ2VtaW5pLWV4dHJhLWFyZ3MnLCB7IHJlcXVpcmVkOiBmYWxzZSB9KSB8fCAoY29uZmlnT3B0aW9uc1snZ2VtaW5pLWV4dHJhLWFyZ3MnXSBhcyBzdHJpbmcpO1xuY29uc3QgcmVwb21peEV4dHJhQXJncyA9XG4gIGNvcmUuZ2V0SW5wdXQoJ3JlcG9taXgtZXh0cmEtYXJncycsIHsgcmVxdWlyZWQ6IGZhbHNlIH0pIHx8IChjb25maWdPcHRpb25zWydyZXBvbWl4LWV4dHJhLWFyZ3MnXSBhcyBzdHJpbmcpO1xuY29uc3QgdGVzdENvbW1hbmQgPSBjb3JlLmdldElucHV0KCd0ZXN0LWNvbW1hbmQnLCB7IHJlcXVpcmVkOiBmYWxzZSB9KSB8fCAoY29uZmlnT3B0aW9uc1sndGVzdC1jb21tYW5kJ10gYXMgc3RyaW5nKTtcbmNvbnN0IG1heFRlc3RBdHRlbXB0c0lucHV0ID1cbiAgY29yZS5nZXRJbnB1dCgnbWF4LXRlc3QtYXR0ZW1wdHMnLCB7IHJlcXVpcmVkOiBmYWxzZSB9KSB8fCAoY29uZmlnT3B0aW9uc1snbWF4LXRlc3QtYXR0ZW1wdHMnXSBhcyBzdHJpbmcgfCBudW1iZXIpO1xuY29uc3QgbWF4VGVzdEF0dGVtcHRzID0gbWF4VGVzdEF0dGVtcHRzSW5wdXRcbiAgPyBOdW1iZXIucGFyc2VJbnQoU3RyaW5nKG1heFRlc3RBdHRlbXB0c0lucHV0KSwgMTApXG4gIDogREVGQVVMVF9NQVhfVEVTVF9BVFRFTVBUUztcbmNvbnN0IHJlbW92ZVBhdHRlcm4gPVxuICBjb3JlLmdldElucHV0KCdyZW1vdmUtcGF0dGVybicsIHsgcmVxdWlyZWQ6IGZhbHNlIH0pIHx8IChjb25maWdPcHRpb25zWydyZW1vdmUtcGF0dGVybiddIGFzIHN0cmluZyk7XG5jb25zdCBub0JyYW5jaElucHV0ID0gY29yZS5nZXRJbnB1dCgnbm8tYnJhbmNoJywgeyByZXF1aXJlZDogZmFsc2UgfSkgfHwgKGNvbmZpZ09wdGlvbnNbJ25vLWJyYW5jaCddIGFzIHN0cmluZyk7XG5jb25zdCBub0JyYW5jaCA9IG5vQnJhbmNoSW5wdXQgPT09ICd0cnVlJztcbmNvbnN0IG5vZGVSdW50aW1lSW5wdXQgPSAoY29yZS5nZXRJbnB1dCgnbm9kZS1ydW50aW1lJywgeyByZXF1aXJlZDogZmFsc2UgfSkgfHxcbiAgKGNvbmZpZ09wdGlvbnNbJ25vZGUtcnVudGltZSddIGFzIHN0cmluZykgfHxcbiAgREVGQVVMVF9OT0RFX1JVTlRJTUUpIGFzIE5vZGVSdW50aW1lO1xuXG5pZiAocmVhc29uaW5nRWZmb3J0ICYmICFbJ2xvdycsICdtZWRpdW0nLCAnaGlnaCddLmluY2x1ZGVzKHJlYXNvbmluZ0VmZm9ydCkpIHtcbiAgY29uc29sZS5lcnJvcihcbiAgICBgSW52YWxpZCByZWFzb25pbmctZWZmb3J0IHZhbHVlOiAke3JlYXNvbmluZ0VmZm9ydH0uIFVzaW5nIGRlZmF1bHQuIFZhbGlkIHZhbHVlcyBhcmU6IGxvdywgbWVkaXVtLCBoaWdoYFxuICApO1xuICBwcm9jZXNzLmV4aXQoMSk7XG59XG5cbmlmICghWydhaWRlcicsICdjbGF1ZGUtY29kZScsICdjb2RleC1jbGknLCAnZ2VtaW5pLWNsaSddLmluY2x1ZGVzKGNvZGluZ1Rvb2wpKSB7XG4gIGNvbnNvbGUuZXJyb3IoXG4gICAgYEludmFsaWQgY29kaW5nLXRvb2wgdmFsdWU6ICR7Y29kaW5nVG9vbH0uIFVzaW5nIGRlZmF1bHQuIFZhbGlkIHZhbHVlcyBhcmU6IGFpZGVyLCBjbGF1ZGUtY29kZSwgY29kZXgtY2xpLCBnZW1pbmktY2xpYFxuICApO1xuICBwcm9jZXNzLmV4aXQoMSk7XG59XG5cbmlmIChub2RlUnVudGltZUlucHV0ICYmICFbJ25vZGUnLCAnYnVuJywgJ25weCcsICdidW54J10uaW5jbHVkZXMobm9kZVJ1bnRpbWVJbnB1dCkpIHtcbiAgY29uc29sZS5lcnJvcihcbiAgICBgSW52YWxpZCBub2RlLXJ1bnRpbWUgdmFsdWU6ICR7bm9kZVJ1bnRpbWVJbnB1dH0uIFVzaW5nIGRlZmF1bHQuIFZhbGlkIHZhbHVlcyBhcmU6IG5vZGUgKG5weCkgYW5kIGJ1biAoYnVueClgXG4gICk7XG4gIHByb2Nlc3MuZXhpdCgxKTtcbn1cblxuLy8gTm9ybWFsaXplIHRoZSBydW50aW1lIHZhbHVlIChjb252ZXJ0IGFsaWFzZXMgdG8gYWN0dWFsIGNvbW1hbmRzKVxuY29uc3Qgbm9kZVJ1bnRpbWU6IE5vZGVSdW50aW1lQWN0dWFsID0gbm9ybWFsaXplTm9kZVJ1bnRpbWUobm9kZVJ1bnRpbWVJbnB1dCk7XG5cbi8vIGNmLiBodHRwczovL2dpdGh1Yi5jb20vY2xpL2NsaS9pc3N1ZXMvODQ0MSNpc3N1ZWNvbW1lbnQtMTg3MDI3MTg1N1xuZnMucm1TeW5jKHBhdGguam9pbihvcy5ob21lZGlyKCksICcuY29uZmlnJywgJ2doJyksIHsgZm9yY2U6IHRydWUsIHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcblxudm9pZCBtYWluKHtcbiAgYWlkZXJFeHRyYUFyZ3MsXG4gIGNsYXVkZUNvZGVFeHRyYUFyZ3MsXG4gIGNvZGV4RXh0cmFBcmdzLFxuICBnZW1pbmlFeHRyYUFyZ3MsXG4gIGNvZGluZ1Rvb2wsXG4gIHR3b1N0YWdlUGxhbm5pbmcsXG4gIGRyeVJ1bixcbiAgbm9CcmFuY2gsXG4gIG5vZGVSdW50aW1lLFxuICBpc3N1ZU51bWJlcjogTnVtYmVyKGlzc3VlTnVtYmVyKSxcbiAgbWF4VGVzdEF0dGVtcHRzLFxuICBwbGFubmluZ01vZGVsLFxuICByZWFzb25pbmdFZmZvcnQsXG4gIHJlcG9taXhFeHRyYUFyZ3MsXG4gIHRlc3RDb21tYW5kLFxuICByZW1vdmVQYXR0ZXJuLFxufSk7XG4iXSwibmFtZXMiOlsiY29uZmlnT3B0aW9ucyIsImxvYWRDb25maWdGaWxlIiwiaXNzdWVOdW1iZXIiLCJjb3JlIiwiZ2V0SW5wdXQiLCJyZXF1aXJlZCIsInBsYW5uaW5nTW9kZWwiLCJ0d29TdGFnZVBsYW5uaW5nIiwicmVhc29uaW5nRWZmb3J0IiwiZHJ5UnVuIiwiY29kaW5nVG9vbCIsIkRFRkFVTFRfQ09ESU5HX1RPT0wiLCJhaWRlckV4dHJhQXJncyIsImNsYXVkZUNvZGVFeHRyYUFyZ3MiLCJjb2RleEV4dHJhQXJncyIsImdlbWluaUV4dHJhQXJncyIsInJlcG9taXhFeHRyYUFyZ3MiLCJ0ZXN0Q29tbWFuZCIsIm1heFRlc3RBdHRlbXB0c0lucHV0IiwibWF4VGVzdEF0dGVtcHRzIiwiTnVtYmVyIiwicGFyc2VJbnQiLCJTdHJpbmciLCJERUZBVUxUX01BWF9URVNUX0FUVEVNUFRTIiwicmVtb3ZlUGF0dGVybiIsIm5vQnJhbmNoIiwibm9kZVJ1bnRpbWVJbnB1dCIsIkRFRkFVTFRfTk9ERV9SVU5USU1FIiwiaW5jbHVkZXMiLCJjb25zb2xlIiwiZXJyb3IiLCJwcm9jZXNzIiwiZXhpdCIsIm5vZGVSdW50aW1lIiwibm9ybWFsaXplTm9kZVJ1bnRpbWUiLCJmcyIsInJtU3luYyIsInBhdGgiLCJqb2luIiwib3MiLCJob21lZGlyIiwiZm9yY2UiLCJyZWN1cnNpdmUiLCJtYWluIl0sIm1hcHBpbmdzIjoidWlCQVVBLE1BQU1BLEVBQWdCQyxJQUdoQkMsRUFBY0MsRUFBS0MsU0FBUyxlQUFnQixDQUFFQyxVQUFVLElBQ3hEQyxFQUNKSCxFQUFLQyxTQUFTLGlCQUFrQixDQUFFQyxVQUFVLEtBQWFMLEVBQWMsa0JBR25FTyxFQUE2QyxXQURqREosRUFBS0MsU0FBUyxzQkFBdUIsQ0FBRUMsVUFBVSxLQUFhTCxFQUFjLHdCQUV4RVEsRUFBbUJMLEVBQUtDLFNBQVMsbUJBQW9CLENBQUVDLFVBQVUsS0FDcEVMLEVBQWMsb0JBRVhTLEVBQXlCLFVBRFhOLEVBQUtDLFNBQVMsVUFBVyxDQUFFQyxVQUFVLEtBQWFMLEVBQWMsWUFFOUVVLEVBQWNQLEVBQUtDLFNBQVMsY0FBZSxDQUFFQyxVQUFVLEtBQzFETCxFQUFjLGdCQUNmVyxFQUNJQyxFQUNKVCxFQUFLQyxTQUFTLG1CQUFvQixDQUFFQyxVQUFVLEtBQWFMLEVBQWMsb0JBQ3JFYSxFQUNKVixFQUFLQyxTQUFTLHlCQUEwQixDQUFFQyxVQUFVLEtBQWFMLEVBQWMsMEJBQzNFYyxFQUNKWCxFQUFLQyxTQUFTLG1CQUFvQixDQUFFQyxVQUFVLEtBQWFMLEVBQWMsb0JBQ3JFZSxFQUNKWixFQUFLQyxTQUFTLG9CQUFxQixDQUFFQyxVQUFVLEtBQWFMLEVBQWMscUJBQ3RFZ0IsRUFDSmIsRUFBS0MsU0FBUyxxQkFBc0IsQ0FBRUMsVUFBVSxLQUFhTCxFQUFjLHNCQUN2RWlCLEVBQWNkLEVBQUtDLFNBQVMsZUFBZ0IsQ0FBRUMsVUFBVSxLQUFhTCxFQUFjLGdCQUNuRmtCLEVBQ0pmLEVBQUtDLFNBQVMsb0JBQXFCLENBQUVDLFVBQVUsS0FBYUwsRUFBYyxxQkFDdEVtQixFQUFrQkQsRUFDcEJFLE9BQU9DLFNBQVNDLE9BQU9KLEdBQXVCLElBQzlDSyxFQUNFQyxFQUNKckIsRUFBS0MsU0FBUyxpQkFBa0IsQ0FBRUMsVUFBVSxLQUFhTCxFQUFjLGtCQUVuRXlCLEVBQTZCLFVBRGJ0QixFQUFLQyxTQUFTLFlBQWEsQ0FBRUMsVUFBVSxLQUFhTCxFQUFjLGNBRWxGMEIsRUFBb0J2QixFQUFLQyxTQUFTLGVBQWdCLENBQUVDLFVBQVUsS0FDakVMLEVBQWMsaUJBQ2YyQixFQUVFbkIsSUFBb0IsQ0FBQyxNQUFPLFNBQVUsUUFBUW9CLFNBQVNwQixLQUN6RHFCLFFBQVFDLE1BQ04sbUNBQW1DdEIseURBRXJDdUIsUUFBUUMsS0FBSyxJQUdWLENBQUMsUUFBUyxjQUFlLFlBQWEsY0FBY0osU0FBU2xCLEtBQ2hFbUIsUUFBUUMsTUFDTiw4QkFBOEJwQixpRkFFaENxQixRQUFRQyxLQUFLLElBR1hOLElBQXFCLENBQUMsT0FBUSxNQUFPLE1BQU8sUUFBUUUsU0FBU0YsS0FDL0RHLFFBQVFDLE1BQ04sK0JBQStCSixpRUFFakNLLFFBQVFDLEtBQUssSUFJZixNQUFNQyxFQUFpQ0MsRUFBcUJSLEdBRzVEUyxFQUFHQyxPQUFPQyxFQUFLQyxLQUFLQyxFQUFHQyxVQUFXLFVBQVcsTUFBTyxDQUFFQyxPQUFPLEVBQU1DLFdBQVcsSUFFekVDLEVBQUssQ0FDUi9CLGlCQUNBQyxzQkFDQUMsaUJBQ0FDLGtCQUNBTCxhQUNBSCxtQkFDQUUsU0FDQWdCLFdBQ0FRLGNBQ0EvQixZQUFha0IsT0FBT2xCLEdBQ3BCaUIsa0JBQ0FiLGdCQUNBRSxrQkFDQVEsbUJBQ0FDLGNBQ0FPIn0=
